{
  "fields": [
    {
      "type": "readonly",
      "label": "Last",
      "name": "Student.last"
    },
    {
      "type": "readonly",
      "label": "First",
      "name": "Student.first"
    },
    {% if objects[1] %}
    {
      "label": "{{ objects[1][0].start_time.strftime('%b %-d, %-I%p') }}",
      "name": "Attendance.arrived",
      "type": "checkbox",
      "separator": "|",
      "options": [{ "label": "", "value": 1 }]
    },
    {% endif %}
    {
      "type": "readonly",
      "label": "Phone",
      "name": "Student.phone"
    }
  ],
  "data": [
    {% for object in objects[0] %}
    {
      {% set outer_loop = loop %}
      "StudentID": "{{ object.id }}",
      "{{ object_types[0] }}": {
        "first": "{{ object.first }}",
        "last": "{{ object.last }}",
        "phone": "{{ object.phone }}"
      }
      {% if objects[1] %},
      "{{ object_types[1] }}":{
        {% for attendance in objects[1] if attendance.student_id == object.id %}
            "arrived": {% if attendance.arrived == None %}"0"{% else %}"1"{% endif %}
        {% if loop.last %}{% else %},{% endif %}
        {% endfor %}
      }
      {% endif %}
    }{% if loop.last %}{% else %},{% endif %}
    {% endfor %}
  ]
}